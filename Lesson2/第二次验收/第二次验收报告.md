# 第二次任务完成报告

## Task1

主要是rgb转hsv的公式，以及rgb转gray的相应每个颜色的权重

+ RGB转HSV的公式如下

<img src="https://img-blog.csdnimg.cn/img_convert/4b963f5000db111f99a75809fa455fb1.png" style="zoom: 67%;" />

+ RGB转GRAY的公式如下（接近人眼感受）
  $$
  V_{gray}=R\times0.3+G\times0.59+B\times0.11
  $$

最后使用at操作对每一个像素处理即可

结果如下：

![](https://cdn.luogu.com.cn/upload/image_hosting/qy4pjhk9.png)

## Task2

利用高斯金字塔，每次向上采样即为放大四倍，向下采样即为缩小四倍。

+ 对于向上采样来说，每行每列之间添加一行一列，均赋值为（0，0，0），随后用高斯模糊
+ 对于向下采样来说，先进行高斯模糊，然后隔行隔列删除一列

而要完成任意比例缩放，只需按比例增加/删除列和行，然后赋值为附近行列的值即可完成缩放

最后增加一个高斯模糊操作，然后创建滑动条更加直观。

结果如下

![](https://cdn.luogu.com.cn/upload/image_hosting/pe5wufcv.png)

## Task3

提取车牌的大致操作如下：

1. 高斯滤波减噪(GaussianBlur)

2. 将RGB(BGR)转换为HSV(CvtColor)，便于分割出蓝色

3. 阈值分割(inRange)，HSV按照相应阈值，转化为二值图，S，V要求稍微高一些，否则会无法消除一些很浅的蓝色部分。

4. 闭操作，先膨胀后腐蚀，有关开闭操作如下：

   + 开操作先进行腐蚀操作，再进行膨胀操作，消除值高于邻近点的孤立点，达到去除图像中噪声的作用（假定对象是前景色、背景是黑色）；消除较小的连通域，保留较大的连通域；断开较窄的狭颈，可以在两个物体纤细的连接处将它们分离；不明显改变较大连通域的面积的情况下平滑连通域的连界、轮廓。
   + 闭操作先进行膨胀操作，再进行腐蚀操作，消除值低于邻近点的孤立点，达到去除图像中噪声的作用（假定对象是前景色、背景是黑色）；连接两个邻近的连通域；弥合较窄的间断和细长的沟壑；去除连通域内的小型空洞；能够平滑物体的轮廓。

   > 开闭腐蚀膨胀可以通过一个函数调用实现morphologyEx，需要先通过getStructuringElement获取卷积核

5. 轮廓查找，查找外层，仅存拐点

6. 根据获得的轮廓，求得外接矩形(boundingRect),添加限定条件，宽高比限定在[2,4]，限定面积大于1000，获得识别的车牌。

7. 保存，框选，显示

结果如下

![](https://cdn.luogu.com.cn/upload/image_hosting/0cb8dpdw.png)
